<UserControl x:Class="Admas_HRM2.Attendance"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d"
             d:DesignWidth="1200"
             Background="White">

    <UserControl.Resources>
        <!-- Color Resources -->
        <Color x:Key="PrimaryColor">#2C3E50</Color>
        <Color x:Key="SecondaryColor">#3498DB</Color>
        <Color x:Key="SuccessColor">#27AE60</Color>
        <Color x:Key="DangerColor">#E74C3C</Color>

        <!-- Gradient Header -->
        <LinearGradientBrush x:Key="HeaderGradient" StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="#2980b9" Offset="0"/>
            <GradientStop Color="#6dd5fa" Offset="1"/>
        </LinearGradientBrush>

        <!-- Button Style -->
        <Style TargetType="Button">
            <Setter Property="Background" Value="#2980B9"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Padding" Value="10,5"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" CornerRadius="5">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="OverridesDefaultStyle" Value="True"/>
        </Style>

        <!-- TextBox Style -->
        <Style TargetType="TextBox">
            <Setter Property="BorderBrush" Value="#CCCCCC"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="7"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}" 
                                BorderThickness="{TemplateBinding BorderThickness}" 
                                CornerRadius="5">
                            <ScrollViewer x:Name="PART_ContentHost"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- DataGrid Style -->
        <Style TargetType="DataGrid">
            <Setter Property="Background" Value="White"/>
            <Setter Property="Foreground" Value="Black"/>
            <Setter Property="BorderBrush" Value="#CCCCCC"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="RowHeight" Value="40"/>
            <Setter Property="AlternatingRowBackground" Value="#F0F0F0"/>
            <Setter Property="SelectionMode" Value="Single"/>
            <Setter Property="AutoGenerateColumns" Value="False"/>
            <Setter Property="HeadersVisibility" Value="Column"/>
            <Setter Property="RowHeaderWidth" Value="30"/>

            <Setter Property="CellStyle">
                <Setter.Value>
                    <Style TargetType="DataGridCell">
                        <Setter Property="Padding" Value="5"/>
                        <Setter Property="BorderBrush" Value="#CCCCCC"/>
                        <Setter Property="BorderThickness" Value="0"/>
                        <Setter Property="Background" Value="Transparent"/>
                        <Style.Triggers>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter Property="Background" Value="#D1E8FF"/>
                                <Setter Property="Foreground" Value="Gray"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Setter.Value>
            </Setter>

            <Setter Property="RowHeaderStyle">
                <Setter.Value>
                    <Style TargetType="DataGridRowHeader">
                        <Setter Property="Background" Value="#EAEAEA"/>
                        <Setter Property="BorderBrush" Value="#CCCCCC"/>
                        <Setter Property="BorderThickness" Value="1"/>
                    </Style>
                </Setter.Value>
            </Setter>

            <Setter Property="ColumnHeaderStyle">
                <Setter.Value>
                    <Style TargetType="DataGridColumnHeader">
                        <Setter Property="Background" Value="#2980B9"/>
                        <Setter Property="Foreground" Value="White"/>
                        <Setter Property="FontWeight" Value="Bold"/>
                        <Setter Property="Padding" Value="5"/>
                        <Setter Property="BorderBrush" Value="#CCCCCC"/>
                        <Setter Property="BorderThickness" Value="1"/>
                    </Style>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Additional Styles -->
        <Style x:Key="FilterHeader" TargetType="TextBlock">
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="#2C3E50"/>
        </Style>

        <Style x:Key="SummaryCard" TargetType="Border">
            <Setter Property="Background" Value="White"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="#E0E0E0"/>
            <Setter Property="Padding" Value="16"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect BlurRadius="12" ShadowDepth="4" Opacity="0.1"/>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="ModernDatePicker" TargetType="DatePicker">
            <Setter Property="Height" Value="36"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="BorderBrush" Value="#E0E0E0"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="8"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
        </Style>

        <Style x:Key="ModernComboBox" TargetType="ComboBox">
            <Setter Property="Height" Value="36"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="BorderBrush" Value="#E0E0E0"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="8"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Background" Value="White"/>
        </Style>

        <Style x:Key="ModernComboBoxItem" TargetType="ComboBoxItem">
            <Setter Property="Padding" Value="8"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ComboBoxItem">
                        <Border Background="{TemplateBinding Background}"
                        Padding="{TemplateBinding Padding}">
                            <ContentPresenter />
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    </UserControl.Resources>

    <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
        <StackPanel Margin="20" Orientation="Vertical">
            <!-- Header Section -->
            <Border Background="{StaticResource HeaderGradient}" 
                    CornerRadius="5" 
                    Padding="15" 
                    Margin="0,0,0,30">
                <TextBlock Text="Attendance Management System" 
                         FontSize="26" 
                         FontWeight="Bold" 
                         Foreground="White"
                         HorizontalAlignment="Center"/>
            </Border>

            <!-- Filter Controls -->
            <Border Style="{StaticResource SummaryCard}" Margin="0,0,0,20">
                <Grid Margin="8">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Date Range -->
                    <StackPanel Grid.Column="0" Margin="0,0,16,0">
                        <TextBlock Text="Date " Style="{StaticResource FilterHeader}"/>
                        <StackPanel Orientation="Horizontal" Margin="0,8,0,0" VerticalAlignment="Center">
                            <DatePicker x:Name="dpStartDate" 
                          Width="160" 
                          Style="{StaticResource ModernDatePicker}"
                          SelectedDateFormat="Short"/>
                            
                        </StackPanel>
                    </StackPanel>

                    <!-- Employee Filter -->
                    <StackPanel Grid.Column="1" Margin="16,0,16,0">
                        <TextBlock Text="Department" Style="{StaticResource FilterHeader}"/>
                        <ComboBox x:Name="cmbEmployeeFilter" 
                    Margin="0,8,0,0"
                    Style="{StaticResource ModernComboBox}"
                    ItemContainerStyle="{StaticResource ModernComboBoxItem}"/>
                    </StackPanel>

                    <!-- Action Buttons -->
                    <StackPanel Grid.Column="2" 
                  Grid.RowSpan="2"
                  Orientation="Vertical" 
                  VerticalAlignment="Bottom"
                  HorizontalAlignment="Right"
                  Margin="0,8,0,0">
                        <Button Content="APPLY FILTERS" 
                  Width="140"
                                Height="40"
                  Click="ApplyFilters_Click"/>
                        
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Attendance Summary -->
            <Border Style="{StaticResource SummaryCard}" Margin="0,0,0,20">
                <StackPanel>
                    <TextBlock Text="Attendance Overview" Style="{StaticResource FilterHeader}"/>
                    <Grid Margin="0,10,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- Present -->
                        <Border Style="{StaticResource SummaryCard}">
                            <StackPanel>
                                <TextBlock Text="Present" Foreground="#27AE60"/>
                                <TextBlock Text="248" FontSize="24" FontWeight="Bold"/>
                                <TextBlock Text="Employees" Foreground="#7F8C8D"/>
                            </StackPanel>
                        </Border>

                        <!-- Absent -->
                        <Border Style="{StaticResource SummaryCard}" Grid.Column="1" Margin="10,0">
                            <StackPanel>
                                <TextBlock Text="Absent" Foreground="#E74C3C"/>
                                <TextBlock Text="12" FontSize="24" FontWeight="Bold"/>
                                <TextBlock Text="Employees" Foreground="#7F8C8D"/>
                            </StackPanel>
                        </Border>

                        <!-- Compliance -->
                        <Border Style="{StaticResource SummaryCard}" Grid.Column="2" Margin="10,0">
                            <StackPanel>
                                <TextBlock Text="Compliance" Foreground="#2980B9"/>
                                <TextBlock Text="95.6%" FontSize="24" FontWeight="Bold"/>
                                <TextBlock Text="Overall Rate" Foreground="#7F8C8D"/>
                            </StackPanel>
                        </Border>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- Attendance Records -->
            <Border Style="{StaticResource SummaryCard}">
                <StackPanel>
                    <!-- Toolbar -->
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,15">
                        <TextBlock Text="Detailed Records" Style="{StaticResource FilterHeader}"/>
                        <Button Width="100" Height="40" Content="Export CSV" Margin="20,0,0,0" Click="ExportCSV_Click"/>
                        <Button Width="100" Height="40" Content="Print Report" Margin="10,0,0,0" Click="PrintReport_Click"/>
                    </StackPanel>

                    <!-- Data Grid -->
                    <DataGrid x:Name="dgAttendance" 
                            AutoGenerateColumns="False"
                            HeadersVisibility="Column"
                            IsReadOnly="True"
                            SelectionMode="Single">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Employee Name" Binding="{Binding EmployeeName}" Width="150"/>
                            <DataGridTextColumn Header="Date" Binding="{Binding Date,StringFormat={}{0:dd MMM yyyy}}" Width="120"/>
                            <DataGridTextColumn Header="Status" Binding="{Binding Status}" Width="100">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="HorizontalAlignment" Value="Center"/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Status}" Value="Present">
                                                <Setter Property="Foreground" Value="#27AE60"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Status}" Value="Absent">
                                                <Setter Property="Foreground" Value="#E74C3C"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                            <DataGridTextColumn Header="Check-In" Binding="{Binding CheckIn,StringFormat={}{0:hh\\:mm}}" Width="100"/>
                            <DataGridTextColumn Header="Check-Out" Binding="{Binding CheckOut,StringFormat={}{0:hh\\:mm}}" Width="100"/>
                            <DataGridTextColumn Header="Hours Worked" Binding="{Binding HoursWorked}" Width="120"/>
                            <DataGridTextColumn Header="Remarks" Binding="{Binding Remarks}" Width="100"/>
                        </DataGrid.Columns>
                    </DataGrid>

                    <!-- Pagination -->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,15,0,0">
                        <Button Content="← Previous" Width="100" Height="40"/>
                        <TextBlock Text="Page 1 of 5" Margin="10,0" VerticalAlignment="Center"/>
                        <Button Content="Next →" Width="100" Height="40"/>
                    </StackPanel>
                </StackPanel>
            </Border>
        </StackPanel>
    </ScrollViewer>
</UserControl>